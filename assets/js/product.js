function imageProduct(){try{const e=document.querySelector(".g-product--detail__image");if(!e)return;const t=new Swiper(".g-product--detail__image__thumbsSwiper",{loop:!0,speed:1e3,freeMode:!0,spaceBetween:10,slidesPerView:3,watchSlidesProgress:!0,breakpoints:{480:{slidesPerView:3},768:{slidesPerView:3},1024:{slidesPerView:5}}}),n=new Swiper(".g-product--detail__image__mainSwiper",{loop:!0,speed:1e3,effect:"fade",spaceBetween:10,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:t}});e._thumbsSwiper=t,e._mainSwiper=n}catch(e){console.warn("Product image swiper error:",e)}}function initQuantityControls(){try{document.addEventListener("click",function(e){e.target.matches(".qty-increase")?handleQuantityChange(e.target,1):e.target.matches(".qty-decrease")&&handleQuantityChange(e.target,-1)}),document.addEventListener("input",function(e){e.target.matches(".qty-input")&&validateQuantityInput(e.target)})}catch(e){console.warn("Quantity controls error:",e)}}function handleQuantityChange(e,t){try{const n=e.parentNode.querySelector(".qty-input");if(!n)return;const r=parseInt(n.value)||1,a=parseInt(n.min)||1,i=parseInt(n.max)||99;let o;o=t>0?Math.min(r+t,i):Math.max(r+t,a),o!==r&&(n.value=o,n.dispatchEvent(new Event("change",{bubbles:!0})))}catch(e){console.warn("Quantity change error:",e)}}function validateQuantityInput(e){try{let t=parseInt(e.value)||1;const n=parseInt(e.min)||1,r=parseInt(e.max)||99;t=Math.max(n,Math.min(t,r)),t!==parseInt(e.value)&&(e.value=t)}catch(e){console.warn("Quantity validation error:",e)}}function cleanupProductSwipers(){try{const e=document.querySelector(".g-product--detail__image");e&&(e._thumbsSwiper&&(e._thumbsSwiper.destroy(!0,!0),delete e._thumbsSwiper),e._mainSwiper&&(e._mainSwiper.destroy(!0,!0),delete e._mainSwiper))}catch(e){console.warn("Cleanup swiper error:",e)}}document.addEventListener("DOMContentLoaded",function(){imageProduct(),initQuantityControls(),window.addEventListener("beforeunload",function(){window.ProductControls&&window.ProductControls.cleanup&&window.ProductControls.cleanup()})}),window.ProductControls={cleanup:cleanupProductSwipers};